"""
DiscussionSummarizer í…ŒìŠ¤íŠ¸ íŒŒì¼

ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ë¡œ ì£¼ì œë³„ ì—°ê´€ì„± ì ìˆ˜ì™€ ê°ê´€ì ì¸ ë°œì–¸ ìš”ì•½ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:
1. ê¸°ë³¸ ì¼€ì´ìŠ¤ - ëª¨ë“  ì£¼ì œì— ê³ ë¥´ê²Œ ë°œì–¸
2. í¸ì¤‘ ì¼€ì´ìŠ¤ - íŠ¹ì • ì£¼ì œì—ë§Œ ì§‘ì¤‘ ë°œì–¸
3. í˜¼í•© ì¼€ì´ìŠ¤ - ì—¬ëŸ¬ ì£¼ì œê°€ ì„ì¸ ë°œì–¸
"""

import json
from app.discussion_summarizer import DiscussionSummarizer


def create_test_case_1():
    """ì¼€ì´ìŠ¤ 1: ëª¨ë“  ì£¼ì œì— ê³ ë¥´ê²Œ ë°œì–¸ (ì´ìƒì ì¸ ì¼€ì´ìŠ¤)"""
    discussion_topics = [
        {
            "name": "ë©”ë‰´ ê°œë°œ ë° í’ˆì§ˆ ê´€ë¦¬",
            "description": "ì‹ ë©”ë‰´ ê°œë°œê³¼ ê¸°ì¡´ ë©”ë‰´ í’ˆì§ˆ ìœ ì§€"
        },
        {
            "name": "ì§ì› êµìœ¡ ë° ì—­ëŸ‰ ê°•í™”",
            "description": "ì§ì› êµìœ¡ í”„ë¡œê·¸ë¨ ë° ìŠ¤í‚¬ í–¥ìƒ"
        },
        {
            "name": "ë§¤ì¥ í™˜ê²½ ë° ë¶„ìœ„ê¸°",
            "description": "ë§¤ì¥ ì¸í…Œë¦¬ì–´, ì²­ê²°ë„, ë¶„ìœ„ê¸° ê°œì„ "
        },
        {
            "name": "ë””ì§€í„¸ ì „í™˜",
            "description": "í‚¤ì˜¤ìŠ¤í¬, ëª¨ë°”ì¼ ì£¼ë¬¸ ë“± ë””ì§€í„¸í™”"
        }
    ]

    chat_history = [
        # ë©”ë‰´ ê°œë°œ ê´€ë ¨ (ê¹€ì£¼ì„ 4ê°œ)
        {"nickname": "ë°•ë§¤ë‹ˆì €", "text": "ì‹ ë©”ë‰´ ê°œë°œì— ëŒ€í•œ ì˜ê²¬ì„ ë“¤ì–´ë³¼ê¹Œìš”?", "timestamp": "2025-01-20T09:00:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ê³„ì ˆ ë©”ë‰´ë¥¼ ë¶„ê¸°ë³„ë¡œ ì¶œì‹œí•˜ë©´ ê³ ê°ë“¤ì´ ì‹ ì„ í•¨ì„ ëŠë‚„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.", "timestamp": "2025-01-20T09:01:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ë¡œì»¬ ì‹ì¬ë£Œë¥¼ í™œìš©í•œ ë©”ë‰´ ê°œë°œë„ íŠ¸ë Œë“œì— ë§ì„ ê²ƒ ê°™ì•„ìš”.", "timestamp": "2025-01-20T09:02:00"},
        {"nickname": "ì´ì‚¬ì›", "text": "ë¹„ê±´ ë©”ë‰´ë„ ì¶”ê°€í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.", "timestamp": "2025-01-20T09:03:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ë©”ë‰´ì˜ í”Œë ˆì´íŒ…ë„ ì¤‘ìš”í•©ë‹ˆë‹¤. SNSì— ì˜¬ë¦´ ë§Œí•œ ë¹„ì£¼ì–¼ì´ í•„ìš”í•´ìš”.", "timestamp": "2025-01-20T09:04:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ì •ê¸°ì ì¸ ì‹œì‹íšŒë¥¼ í†µí•´ ë©”ë‰´ í’ˆì§ˆì„ ê²€ì¦í•˜ëŠ” ì‹œìŠ¤í…œì´ í•„ìš”í•©ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:05:00"},

        # ì§ì› êµìœ¡ ê´€ë ¨ (ê¹€ì£¼ì„ 3ê°œ)
        {"nickname": "ë°•ë§¤ë‹ˆì €", "text": "ì§ì› êµìœ¡ì€ ì–´ë–»ê²Œ ì§„í–‰í•˜ë©´ ì¢‹ì„ê¹Œìš”?", "timestamp": "2025-01-20T09:06:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ì‹ ì… ì§ì›ì„ ìœ„í•œ ì²´ê³„ì ì¸ ì˜¨ë³´ë”© í”„ë¡œê·¸ë¨ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:07:00"},
        {"nickname": "ì´ì‚¬ì›", "text": "ì„œë¹„ìŠ¤ ë§¤ë‰´ì–¼ì„ ë§Œë“¤ë©´ ì¢‹ê² ì–´ìš”.", "timestamp": "2025-01-20T09:08:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ì›” 1íšŒ ì „ ì§ì› ëŒ€ìƒ ì„œë¹„ìŠ¤ êµìœ¡ê³¼ ìœ„ìƒ êµìœ¡ì„ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:09:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ìš°ìˆ˜ ì§ì› ì¸ì„¼í‹°ë¸Œ ì œë„ë¥¼ ë„ì…í•˜ë©´ ë™ê¸°ë¶€ì—¬ê°€ ë  ê²ƒì…ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:10:00"},

        # ë§¤ì¥ í™˜ê²½ ê´€ë ¨ (ê¹€ì£¼ì„ 3ê°œ)
        {"nickname": "ë°•ë§¤ë‹ˆì €", "text": "ë§¤ì¥ í™˜ê²½ ê°œì„  ì•„ì´ë””ì–´ê°€ ìˆë‚˜ìš”?", "timestamp": "2025-01-20T09:11:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ì¡°ëª…ì„ ë”°ëœ»í•œ ìƒ‰ìœ¼ë¡œ ë°”ê¾¸ë©´ ë¶„ìœ„ê¸°ê°€ ë” ì•„ëŠ‘í•´ì§ˆ ê²ƒ ê°™ìŠµë‹ˆë‹¤.", "timestamp": "2025-01-20T09:12:00"},
        {"nickname": "ì´ì‚¬ì›", "text": "ì¢Œì„ ê°„ê²©ì„ ë„“íˆë©´ í”„ë¼ì´ë²„ì‹œê°€ ì¢‹ì•„ì§ˆ ê²ƒ ê°™ì•„ìš”.", "timestamp": "2025-01-20T09:13:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ë§¤ì¥ ìŒì•…ë„ ì‹œê°„ëŒ€ë³„ë¡œ ë‹¤ë¥´ê²Œ í‹€ë©´ ì¢‹ê² ì–´ìš”. ì ì‹¬ì—ëŠ” ë°ê²Œ, ì €ë…ì—ëŠ” ì°¨ë¶„í•˜ê²Œ.", "timestamp": "2025-01-20T09:14:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "í™”ì¥ì‹¤ê³¼ ì£¼ë°©ì„ í•­ìƒ ì²­ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ê³ ê° ë§Œì¡±ì˜ ê¸°ë³¸ì…ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:15:00"},

        # ë””ì§€í„¸ ì „í™˜ ê´€ë ¨ (ê¹€ì£¼ì„ 4ê°œ)
        {"nickname": "ë°•ë§¤ë‹ˆì €", "text": "ë””ì§€í„¸ ì‹œìŠ¤í…œ ë„ì…ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”?", "timestamp": "2025-01-20T09:16:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "í‚¤ì˜¤ìŠ¤í¬ë¥¼ ë„ì…í•˜ë©´ ì£¼ë¬¸ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", "timestamp": "2025-01-20T09:17:00"},
        {"nickname": "ì´ì‚¬ì›", "text": "ëª¨ë°”ì¼ ì„ ì£¼ë¬¸ ì‹œìŠ¤í…œë„ í•„ìš”í•©ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:18:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "QRì½”ë“œë¡œ ë©”ë‰´íŒì„ ì œê³µí•˜ë©´ ì¢…ì´ ë‚­ë¹„ë„ ì¤„ì´ê³  ìœ„ìƒì ì…ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:19:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ê³ ê° ë°ì´í„°ë¥¼ ë¶„ì„í•´ì„œ ë§ì¶¤í˜• í”„ë¡œëª¨ì…˜ì„ ì œê³µí•˜ë©´ ì¬ë°©ë¬¸ìœ¨ì´ ë†’ì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:20:00"},
        {"nickname": "ê¹€ì£¼ì„", "text": "ë°°ë‹¬ ì•± í†µí•© ê´€ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ íš¨ìœ¨ì„±ì„ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-20T09:21:00"},

        # ë¬´ê´€í•œ ë°œì–¸
        {"nickname": "ê¹€ì£¼ì„", "text": "ì˜¤ëŠ˜ íšŒì˜ ì‹œê°„ì´ ê¸¸ì–´ì§€ë„¤ìš”.", "timestamp": "2025-01-20T09:22:00"},
        {"nickname": "ì´ì‚¬ì›", "text": "ì ì‹¬ ë­ ë¨¹ì„ê¹Œìš”?", "timestamp": "2025-01-20T09:23:00"},
    ]

    return {
        "name": "ì¼€ì´ìŠ¤ 1: ê· í˜•ì¡íŒ í† ë¡  ì°¸ì—¬",
        "topics": discussion_topics,
        "chat_history": chat_history,
        "user_id": "ê¹€ì£¼ì„",
        "expected": {
            "ë©”ë‰´ ê°œë°œ ë° í’ˆì§ˆ ê´€ë¦¬": {"count": 4, "score": ">= 0.7"},
            "ì§ì› êµìœ¡ ë° ì—­ëŸ‰ ê°•í™”": {"count": 3, "score": ">= 0.6"},
            "ë§¤ì¥ í™˜ê²½ ë° ë¶„ìœ„ê¸°": {"count": 3, "score": ">= 0.6"},
            "ë””ì§€í„¸ ì „í™˜": {"count": 4, "score": ">= 0.7"},
        }
    }


def create_test_case_2():
    """ì¼€ì´ìŠ¤ 2: í•œ ì£¼ì œì—ë§Œ ì§‘ì¤‘ ë°œì–¸ (í¸ì¤‘ ì¼€ì´ìŠ¤)"""
    discussion_topics = [
        {"name": "ê³ ê° ë¶ˆë§Œ ì²˜ë¦¬", "description": "ê³ ê° ë¶ˆë§Œ ë° ì»´í”Œë ˆì¸ ëŒ€ì‘"},
        {"name": "ë°°ë‹¬ ì„œë¹„ìŠ¤ ê°œì„ ", "description": "ë°°ë‹¬ í’ˆì§ˆ ë° ì‹œê°„ ê°œì„ "},
        {"name": "í”„ë¡œëª¨ì…˜ ì „ëµ", "description": "ë§ˆì¼€íŒ… ë° í”„ë¡œëª¨ì…˜ ê¸°íš"},
        {"name": "ì›ê°€ ê´€ë¦¬", "description": "ì‹ìì¬ ì›ê°€ ì ˆê° ë°©ì•ˆ"}
    ]

    chat_history = [
        # ê³ ê° ë¶ˆë§Œ ì²˜ë¦¬ë§Œ ì§‘ì¤‘ (ìµœëŒ€ë¦¬ 8ê°œ)
        {"nickname": "ê¹€ë¶€ì¥", "text": "ê³ ê° ë¶ˆë§Œì— ì–´ë–»ê²Œ ëŒ€ì‘í•˜ê³  ê³„ì‹ ê°€ìš”?", "timestamp": "2025-01-21T10:00:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ê³ ê° ë¶ˆë§Œì€ ì ‘ìˆ˜ ì¦‰ì‹œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì›ì¹™ì…ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:01:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ë¶ˆë§Œ ìœ í˜•ì„ DBí™”í•´ì„œ íŒ¨í„´ì„ ë¶„ì„í•˜ê³  ì¬ë°œ ë°©ì§€ ëŒ€ì±…ì„ ì„¸ì›Œì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:02:00"},
        {"nickname": "ë°•ì‚¬ì›", "text": "ê³ ê° ì˜ê²¬ì„ ê²½ì²­í•˜ëŠ” ìì„¸ê°€ ì¤‘ìš”í•˜ì£ .", "timestamp": "2025-01-21T10:03:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ë¶ˆë§Œ ê³ ê°ì—ê²ŒëŠ” ì¦‰ì‹œ ì‚¬ê³¼í•˜ê³  ë³´ìƒ ê¸°ì¤€ì„ ëª…í™•íˆ í•´ì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:04:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ì»´í”Œë ˆì¸ ì²˜ë¦¬ í›„ ë°˜ë“œì‹œ ê³ ê° ë§Œì¡±ë„ í™•ì¸ ì „í™”ë¥¼ ë“œë ¤ì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:05:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ì§ì›ë“¤ì—ê²Œ ê³ ê° ì‘ëŒ€ ë§¤ë‰´ì–¼ì„ ìˆ™ì§€ì‹œì¼œ ì¼ê´€ëœ ëŒ€ì‘ì„ í•´ì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:06:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ë¶ˆë§Œ ì‚¬ë¡€ë¥¼ ì›”ë¡€ íšŒì˜ì—ì„œ ê³µìœ í•˜ê³  ê°œì„ ì±…ì„ í•¨ê»˜ ë…¼ì˜í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:07:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "SNS ë¦¬ë·° ëª¨ë‹ˆí„°ë§ë„ ì¤‘ìš”í•©ë‹ˆë‹¤. ë¶€ì •ì  ëŒ“ê¸€ì— ì‹ ì†íˆ ëŒ€ì‘í•´ì•¼ í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:08:00"},
        {"nickname": "ìµœëŒ€ë¦¬", "text": "VIP ê³ ê°ì˜ ë¶ˆë§Œì€ ë”ìš± ì‹ ì¤‘í•˜ê²Œ ì²˜ë¦¬í•˜ê³  íŠ¹ë³„ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.", "timestamp": "2025-01-21T10:09:00"},

        # ë‹¤ë¥¸ ì£¼ì œëŠ” ë¬´ê´€í•œ ë°œì–¸ë§Œ
        {"nickname": "ìµœëŒ€ë¦¬", "text": "ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ìŒ€ìŒ€í•˜ë„¤ìš”.", "timestamp": "2025-01-21T10:10:00"},
        {"nickname": "ë°•ì‚¬ì›", "text": "ì»¤í”¼ í•œ ì” í•˜ì‹¤ë˜ìš”?", "timestamp": "2025-01-21T10:11:00"},
    ]

    return {
        "name": "ì¼€ì´ìŠ¤ 2: ë‹¨ì¼ ì£¼ì œ ì§‘ì¤‘",
        "topics": discussion_topics,
        "chat_history": chat_history,
        "user_id": "ìµœëŒ€ë¦¬",
        "expected": {
            "ê³ ê° ë¶ˆë§Œ ì²˜ë¦¬": {"count": 8, "score": ">= 0.8"},
            "ë°°ë‹¬ ì„œë¹„ìŠ¤ ê°œì„ ": {"count": 0, "score": "= 0.0"},
            "í”„ë¡œëª¨ì…˜ ì „ëµ": {"count": 0, "score": "= 0.0"},
            "ì›ê°€ ê´€ë¦¬": {"count": 0, "score": "= 0.0"},
        }
    }


def create_test_case_3():
    """ì¼€ì´ìŠ¤ 3: ì—¬ëŸ¬ ì£¼ì œê°€ ì„ì¸ ë°œì–¸ (ë³µí•© ì¼€ì´ìŠ¤)"""
    discussion_topics = [
        {"name": "ì§€ì†ê°€ëŠ¥ ê²½ì˜", "description": "ì¹œí™˜ê²½ ìš´ì˜ ë° ESG"},
        {"name": "ì§ì› ë³µì§€", "description": "ì§ì› ì²˜ìš° ë° ë³µì§€ ì œë„"},
        {"name": "ì‹ ê¸°ìˆ  ë„ì…", "description": "AI, ìë™í™” ë“± ì‹ ê¸°ìˆ "},
    ]

    chat_history = [
        # ë³µí•©ì  ë°œì–¸ë“¤ (ì •ê³¼ì¥)
        {"nickname": "ì •ê³¼ì¥", "text": "ì¼íšŒìš©í’ˆ ì‚¬ìš©ì„ ì¤„ì´ê³  ë‹¤íšŒìš©ê¸°ë¥¼ ë„ì…í•˜ë©´ í™˜ê²½ì—ë„ ì¢‹ê³  ë¹„ìš©ë„ ì ˆê°ë©ë‹ˆë‹¤.", "timestamp": "2025-01-22T11:00:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ì§ì›ë“¤ì˜ ê·¼ë¬´ í™˜ê²½ì„ ê°œì„ í•´ì•¼ ì´ì§ë¥ ì´ ë‚®ì•„ì§‘ë‹ˆë‹¤. íœ´ê²Œì‹¤ í™•ì¶©ì´ í•„ìš”í•©ë‹ˆë‹¤.", "timestamp": "2025-01-22T11:01:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "AI ì±—ë´‡ìœ¼ë¡œ ê³ ê° ë¬¸ì˜ë¥¼ ìë™ ì‘ëŒ€í•˜ë©´ ì§ì› ì—…ë¬´ê°€ ì¤„ì–´ë“¤ì–´ìš”.", "timestamp": "2025-01-22T11:02:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ìœ ê¸°ë† ì‹ì¬ë£Œë¥¼ ì‚¬ìš©í•˜ë©´ ê±´ê°•ì—ë„ ì¢‹ê³  ì¹œí™˜ê²½ ì´ë¯¸ì§€ë„ ë†’ì•„ì§‘ë‹ˆë‹¤.", "timestamp": "2025-01-22T11:03:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ì§ì› ê±´ê°•ê²€ì§„ì„ ì—° 2íšŒë¡œ ëŠ˜ë¦¬ê³  ë³µì§€í¬ì¸íŠ¸ë¥¼ ì§€ê¸‰í•˜ë©´ ë§Œì¡±ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.", "timestamp": "2025-01-22T11:04:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ë¡œë´‡ ì„œë¹™ ì‹œìŠ¤í…œì„ ë„ì…í•˜ë©´ ì¸ê±´ë¹„ë¥¼ ì ˆê°í•˜ê³  íš¨ìœ¨ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.", "timestamp": "2025-01-22T11:05:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ìŒì‹ë¬¼ ì“°ë ˆê¸° ê°ëŸ‰ì„ ìœ„í•´ ì†ŒëŸ‰ ë©”ë‰´ ì˜µì…˜ì„ ì œê³µí•˜ëŠ” ê²ƒë„ ë°©ë²•ì…ë‹ˆë‹¤.", "timestamp": "2025-01-22T11:06:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ì£¼ 4ì¼ ê·¼ë¬´ì œë¥¼ ì‹œë²” ë„ì…í•´ì„œ ì§ì› ë§Œì¡±ë„ë¥¼ ë†’ì´ëŠ” ê²ƒë„ ê³ ë ¤í•´ë³¼ ë§Œí•©ë‹ˆë‹¤.", "timestamp": "2025-01-22T11:07:00"},
        {"nickname": "ì •ê³¼ì¥", "text": "ìŠ¤ë§ˆíŠ¸ ì£¼ë°© ì‹œìŠ¤í…œìœ¼ë¡œ ì¡°ë¦¬ ì‹œê°„ê³¼ ì—ë„ˆì§€ë¥¼ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", "timestamp": "2025-01-22T11:08:00"},
    ]

    return {
        "name": "ì¼€ì´ìŠ¤ 3: ë³µí•© ì£¼ì œ ë°œì–¸",
        "topics": discussion_topics,
        "chat_history": chat_history,
        "user_id": "ì •ê³¼ì¥",
        "expected": {
            "ì§€ì†ê°€ëŠ¥ ê²½ì˜": {"count": 3, "score": ">= 0.6"},
            "ì§ì› ë³µì§€": {"count": 3, "score": ">= 0.6"},
            "ì‹ ê¸°ìˆ  ë„ì…": {"count": 3, "score": ">= 0.6"},
        }
    }


def run_test_case(summarizer, test_case):
    """ë‹¨ì¼ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰"""
    print("\n" + "=" * 80)
    print(f"í…ŒìŠ¤íŠ¸: {test_case['name']}")
    print("=" * 80)

    result = summarizer.summarize_user(
        user_id=test_case['user_id'],
        chat_history=test_case['chat_history'],
        discussion_topics=test_case['topics']
    )

    # ê²°ê³¼ ì¶œë ¥
    print(f"\nì‚¬ìš©ì: {result['user_id']}")
    print(f"ì´ ì£¼ì œ ìˆ˜: {len(result['topics'])}")

    issues = []
    for topic_data in result['topics']:
        topic_name = topic_data['topic']
        score = topic_data['relevance_score']
        num_statements = len(topic_data['related_statements'])
        summary = topic_data['summary']

        print(f"\nğŸ“Œ {topic_name}")
        print(f"   ì ìˆ˜: {score:.2f} | ë°œì–¸: {num_statements}ê°œ")

        # ê¸°ëŒ€ê°’ í™•ì¸
        expected = test_case['expected'].get(topic_name, {})
        expected_count = expected.get('count', 0)
        expected_score = expected.get('score', '')

        if num_statements != expected_count:
            print(f"   âš ï¸  ë°œì–¸ ìˆ˜ ë¶ˆì¼ì¹˜ (ê¸°ëŒ€: {expected_count}, ì‹¤ì œ: {num_statements})")
            issues.append(f"{topic_name}: ë°œì–¸ ìˆ˜ {num_statements} != {expected_count}")

        # ìš”ì•½ë¬¸ ì²´í¬
        has_summary = summary and summary != "ì´ ì£¼ì œì™€ ê´€ë ¨ëœ ë°œì–¸ì´ ì—†ìŠµë‹ˆë‹¤."
        if num_statements > 0 and not has_summary:
            print(f"   âŒ ë°œì–¸ì´ ìˆëŠ”ë° ìš”ì•½ ì—†ìŒ!")
            issues.append(f"{topic_name}: ìš”ì•½ ëˆ„ë½")
        elif num_statements == 0 and has_summary:
            print(f"   âš ï¸  ë°œì–¸ì´ ì—†ëŠ”ë° ìš”ì•½ ìˆìŒ")
            issues.append(f"{topic_name}: ë¶ˆí•„ìš”í•œ ìš”ì•½")
        elif has_summary:
            print(f"   âœ… ìš”ì•½: {summary[:50]}...")

    # ìµœì¢… íŒì •
    print("\n" + "-" * 80)
    if not issues:
        print("âœ… í…ŒìŠ¤íŠ¸ í†µê³¼!")
    else:
        print(f"âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ({len(issues)}ê°œ ì´ìŠˆ)")
        for issue in issues:
            print(f"   - {issue}")

    return len(issues) == 0


def main():
    """ë©”ì¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰"""
    print("=" * 80)
    print("DiscussionSummarizer ì¢…í•© í…ŒìŠ¤íŠ¸")
    print("=" * 80)

    summarizer = DiscussionSummarizer()

    test_cases = [
        create_test_case_1(),
        create_test_case_2(),
        create_test_case_3(),
    ]

    results = []
    for test_case in test_cases:
        passed = run_test_case(summarizer, test_case)
        results.append((test_case['name'], passed))

    # ìµœì¢… ê²°ê³¼
    print("\n" + "=" * 80)
    print("ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼")
    print("=" * 80)

    passed_count = sum(1 for _, passed in results if passed)
    total_count = len(results)

    for name, passed in results:
        status = "âœ… PASS" if passed else "âŒ FAIL"
        print(f"{status}: {name}")

    print(f"\ní†µê³¼ìœ¨: {passed_count}/{total_count} ({passed_count/total_count*100:.1f}%)")

    if passed_count == total_count:
        print("\nğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤!")
    else:
        print(f"\nâš ï¸  {total_count - passed_count}ê°œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")


if __name__ == "__main__":
    main()
